#
# "VA SystemImager" - Copyright (C) 1999-2001 Brian Elliott Finley <brian@valinux.com>
#
# This file: TODO
# (not in any specific order)
#

--------------------
Developer Guidelines
--------------------
o Current development branch is tagged "HEAD".  
  This is the default.  Most developers will use this.  To switch to 
  this branch from another branch use the command "cvs update -r HEAD" 
  from the root of your development directory.
o Current stable branch is tagged:
   "v1_4_1-beta"
  Use "cvs update -r TAG_NAME" to switch to the stable CVS branch.
o Only Brian Finley will modify CVS tags of any kind, such as for versioning 
  releases or creating development branches.
o Always get approval from Brian Finley prior to adding any new files or 
  directories to CVS.
o You may modify sections in the TODO file bearing your name.
o When you finish an item in your section of the TODO file:
  o Add an appropriate line to the CHANGE.LOG file before removing the 
    item from the TODO file (so we don't forget about keen changes 
    we've made).
  o Send an email to the <systemimager-devel> list announcing completion.
o Do not modify anyone elses section.
o Have fun!

----------------------
CVS Reference Material
----------------------
o http://www.loria.fr/~molli/cvs/doc/cvs_toc.html
 or
o http://www.loria.fr/~molli/cvs/doc/cvs.pdf


-----------------------
Version 1.4.1 specific:
-----------------------

Brian Chrisman <bchrisman@valinux.com>
--------------------------------------
o modify RPM spec file to deal with
  o configuration files
  o additional files
  o changed files


--------------------------
Stable Branch Sub Projects
--------------------------

Greg Pratt <gpratt@valinux.com>
Committed to task: Tue, 06 Mar 2001
-----------------------------------
o Add kernel bug/rsync bug info to Troubleshooting section in docs.


Brian Finley <brian@thefinleys.com>
-----------------------------------
o eepro100 bug
o Reported bug: http://sourceforge.net/tracker/?func=detail&atid=100259&aid=407316&group_id=259
o initrd.gz -- don't pull hosts file if HOSTNAME is already known
o deal with LABEL= and UUID= for any filesystem or device type
o add " || shellout" to the end of almost everything in <image>.master
o calculate network number in makedhcpserver & maybe figure out other stuff too.
o Apply patches from:
  o Wesley Smith <wessmith@cthulhu.engr.sgi.com>
    --------------------------------------------
    o devfs patch
    o TurboLinux patch
    o SuSe patch

  o Fred Gray <fegray@npl.uiuc.edu>
    -------------------------------
    o patch to allow exclude on golden client during getimage.
      o /etc/systemimager/getimage.exclude on golden client


-------------------------------
Development Branch Sub Projects
-------------------------------

Brian Chrisman <bchrisman@valinux.com>
--------------------------------------
o serial redirect for autoinstallclient
  o See email with Subject of: 
    Subject: serial redirect for autoinstalling systems remotely with systemimager
  o See linux/Documentation/serial-console.txt


Greg Smith <grs@xuma.com>
Committed to task: Tue, 23 Jan 2001
-----------------------------------
o mvimage
  o usage: mvimage [OPTIONS] <image> <newimage>
  o renames /var/spool/systemimager/images/<image>
  o renames /tftpboot/systemimager/<image>.master
    (and re-creates any softlinks that point to it)
  o renames entries for <image> in /etc/rsyncd.conf
  o OPTIONS:
    -help
    -verbose
    -quiet
    -interactive  Prompt before renaming each of the following:
                  o image directory
                  o <image>.master autoinstall script and softlinks
                  o image entry in /etc/rsyncd.conf


Volunteer needed (also Greg Smith?)
-----------------------------------
o rmimage
  o usage: rmimage [OPTIONS] <image>
  o removes /var/spool/systemimager/images/<image>
  o removes /tftpboot/systemimager/<image>.master
    (and any softlinks that point to it)
  o removes entry for <image> in /etc/rsyncd.conf
  o OPTIONS:
    -help
    -verbose
    -quiet
    -interactive  Prompt before removing each of the following:
                  o image directory
                  o <image>.master autoinstall script and softlinks
                  o image entry in /etc/rsyncd.conf

  
John Chabalko <john.chabalko@nbci.com> / <johnchabalko@hotmail.com>
Committed to task: Thur Mar 8, 2001  
-------------------------------------------------------------------
o lsimage 
  (3/19/2001 - first review)
  (3/26/2001 - next review)
  o usage: lsimage [OPTIONS]
  o essentially does an: 
     "rsync $server::"
    and returns the output.
  o assumes $server="localhost" if -server not specified.
  o OPTIONS:
    -help
    -verbose
    -quiet
    -server IMAGESERVER


Austin Gonyou <austin@coremetrics.com> 
Wed Mar 21 12:19:10 CST 2001  
--------------------------------------
o commandlineize addclients
  -version
  -help
  -base-hostname HOSTNAME
  -domainname    DOMAINNAME
  -first         HOST_NUMBER
  -last          HOST_NUMBER
  -image         IMAGENAME
  -ip-range      1.2.3.4-1.2.3.99,5.6.7.8-5.6.7.108

  Example:
  $ addclients -b www -d systemimager.org -f 7 -l 11 -image web_image_v1 -ip-range 192.168.1.7-192.168.1.11


Dann Frazier <dannf@hazel.fc.hp.com>
------------------------------------
o replace install scripts with Makefile(s)
o have deb package created
o PXE booting ideas...
with pxe, you can specify what files to serve to a specific hardware
address.
you could have symbolic links that point to the SystemImager kernel &
initrd.gz for each node, with no default files.
you can then remove these links when you decide not to allow that
machine to PXE boot.
the machine will try to pxe boot, won't be able to find its kernel and
initrd.gz, and will boot from the harddrive.
a tool similar to addclients might be useful for this.
        -dann


Austin Gonyou <austin@coremetrics.com>
Wed Mar 21 12:19:10 CST 2001  
----------------------------------------------------------
o web-gui that allows all image server operations as well as:
  o schedule clients to be updated or re-autoinstalled at a later date
    o produce a master schedule file, available from the webserver,
      that clients pull down via a cron job.  parse the file to determine
      the details of what they're supposed to do (if anything).  Create
      a command line utility for doing scheduling.
      o schedule:
        o -f filename
	o other options...
  o provide for reporting of clients that have completed their autoinstalls.
  o Add "Alias /systemimager/ /var/lib/systemimager/web-gui/" to srm.conf 
    in Apache.
o See the "GUI Layout" section in this document for details on the 
  proposed logical arrangement of screens, etc.
o command line scheduling utility


Greg Pryzby <gjp@valinux.com>
Committed to task: Mon, 12 Mar 2001
----------------------------
X Windows GUI
o Run from the imageserver sending the X display back to a sysadmins
  desktop.
o Distribution independent.  The two main distros to initially be
  concerned with are debian and redhat.  Minimal dependencies are
  preferred -- this will be run from a server which may not have lots of
  X and GUI stuff installed.
o The goal is to allow for all of the commands to be run by clicking
  buttons, filling in boxes, etc.
o See the "GUI Layout" section in this document for details on the 
  proposed logical arrangement of screens, etc.


GUI Layout (applies to Web GUI and X GUI)
-----------------------------------------
Main screen:
o Maybe have a SystemImager Wizard (is the term Wizard copyrighted?)
  that basically walks you through the steps in the "Step-by-Step 
  HOWTO":
  http://systemimager.org/manual/html/theactualstep-by-stephowto.html
o Also have buttons for each of the utilities labelled something like:
  o "Pull and Image from a Golden Client" (getimage)
  o "Add Client Autoinstall Information" (addclients)
  o "DHCP Server Configuration"
    o show me my existing config
    o create a new configuration file (makedhcpserver)
    o make existing DHCP leases static (makedhcpstatic)
  o Autoinstall clients
    o I want to re-install an existing system
      o connect to the existing system with ssh 
        (then autoinstall -a -s)
      o connect to the existing system with rlogin
        (then autoinstall -a -s)
    o I want to install systems with an autoinstall diskette
    o I want to install systems with an autoinstall CDROM


James Morton <jmorton@viata.com>
Committed to task: 03 Jan 2001
--------------------------------
o have the autoinstallclient ask user for settings.


George Perry <perryg@elcsci.com>
Wed, 17 Jan 2001
--------------------------------
o bootable recovery CD that self-installs from image stored on same CD


Brian Finley <brian@thefinleys.com>
-----------------------------------

Change paths:
o images:        /var/lib/systemimager/images/
o all other SystemImager stuff (other than imageserver commands) will be
  stored in:            /var/lib/systemimager/
o web gui pages:        /var/lib/systemimager/web-gui/
o autoinstall kernels:  /var/lib/systemimager/`arch`/kernels/
o initial ram disks:    /var/lib/systemimager/`arch`/initial-ramdisks/
o autoinstall scripts:  /var/lib/systemimager/`arch`/scripts/
o autoinstall binaries: /var/lib/systemimager/`arch`/bin/
   (instead of the binary.architecture idea)
o PXE stuff will *not* be dealt with during install, but details will be
   documented in the howto.  Later, this configuration will be handled by
   the "pxeconfig" utility.  (I'm not sure I have your final buy in on
   this one)
o source for the kernel and initrd.gz and everything will be provided in
   a single package that has a master Makefile that will compile source
   provided, and copy over binaries that are just, well, copied over.
   (this also helps deal with the fact that it is sometimes difficult to
   get all the kernel patches to apply properly -- we can provide the
   actual kernel source tree with the patches pre-applied.)

o Modify binaries to use /var/lib/systemimager/ instead of /tftpboot/
o Austin Gonyou patch: Dual NIC Installs
o Jose_AP_Celestino.ida.prepareclient.patch to make systemimager work
  properly with Smart Array cards.  (must get a Smart Array card first)
o getimage - put exclude/include stuff on imageserver by image
  /tftpboot/systemimager/$image.updateclient.include
  /tftpboot/systemimager/$image.updateclient.exclude
o updateclient - local /etc/systemimager/systemimager.exclude or include
  take precedence over include and exclude on imageserver.
o updateclient - include/exclude pulled to temporary files.
o prepareclient - no longer puts /etc/systemimager/systemimager.exclude on
  client.
o check for the presence of a BIOS file written by BIOSwriter. If 
  found, then at the tail end of a client's image pull, it runs 
  BIOSwriter to write the file.
o deal with LABEL=UUID as well as LABEL=mount_point
o next release (1.5.x), make the -imageserver option go away
  in getimage.
o getimage -- exclude option
o if local.cfg and dhcp fails, have client ask for manual input
o redirect to serial port:
  - manual change to syslinux.cfg
  - maybe an append parameter if necessary
  - detect if serial is wanted by having rcS look for variable in
    - $image.master
    - local.cfg
o add -exclude option to getimage
o incorporate ssh
  1) client generates and gives it's key to imageserver prior to pulling down image?
  2) imageserver adds client's key to it's .ssh/authorized_keys file
  3) client can rsync -e ssh in.
o incorporate casper (multicast by Aaron Hillegass <aaron@bignerdranch.com>)
o getimage -- blink option
o getimage -- eject option
o contemplate using wget to pull stuff?
o contemplate using khttpd or tux or similar to show autoinstall client status
o command to put mac addresses/host names into 
  /etc/dhcpd.conf by using broadcast pings, the arp 
  table, and /etc/hosts or dns.
o store certain parameters in /etc/systemimager/systemimager.conf as 
  IMAGESDIRECTORY="/var/spool/systemimager/images"
o section of HOWTO that helps Kickstart users transition to SystemImager.
o redirect syslog messages from autoinstall clients to $imagserver
o addclients -- accept command line input such as --image $imagename
o addclients -- re-cycle through each question if answer is ""
o have getimage question what should be excluded in future when updateimage 
  is run.  /tmp/* and /home/* should be recommended as a starting place.


Ian McLeod <ian@valinux.com> (suggestions)
------------------------------------------
o autoinstall clients report to imageserver "I'm up"
o ability to blink led, floppy light, eject cdrom, etc. on 
  autoinstallclient to identify the machine prior to initiating the 
  autoinstall.
o option to initiate an autoinstall from the client or from the server.
o option to assign permanent IP address/hostname from the server after
  an autoinstall client has booted and checked in.
o ability to adapt to the hardware
  - client chooses section from <imagename>.master based on disk type
    (master script contains sections for hd, sd, and rd)


Miscellaneous and Possibilities
-------------------------------
o /etc/systemimager/systemimager.conf file to hold things like domain name, nis domain, etc.
o support for imaging dual boot systems (Linux/Windows with FAT/HPFS/NTFS)
  o see mondo (available on freshmeat)
o makedhcpserver -- autodiscover and calculate more information 
  (including if system has more than one network interface).
o makedhcpserver -- automatically change line in /etc/rc.d/init.d/dhcpd for you
o updateclient - log what was updated and or deleted?
o makedhcpstatic -- allow for -f "filename" option to specify dhcpd.leases file.


Bug list
--------
Please submit bugs via the "SystemImager Bug Tracking System" link at
http://systemimager.org/

Potential Volunteers
--------------------
o Duane Gustavus <duane@unt.edu>
